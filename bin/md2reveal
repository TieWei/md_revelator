#!/usr/bin/env ruby

$:.unshift(File.expand_path("../../lib", __FILE__))

require "md_revelator"

input = File.expand_path ARGV[0]

if File.readable?(input)
  puts "INPUT - #{input}"
else
  puts "#{input} is not readable"
  exit 1
end

output = File.expand_path ARGV[1]

if File.directory?(output) && File.writable?(output)
  puts "OUTPUT - #{output}"
else
  puts "#{output} is not a writable folder"
  exit 1
end

version = ARGV[2]
if %w(1 2).include? version
  puts "VERSION - #{version}"
else
  puts "version must be in 1 or 2"
  puts "version 1 : using 3 or more '=' / '+' to separate slides, \ 
        support sub-slides by using different separations"
  puts "version 2 : using markdown <hr/> to separate slides, \ 
        support fragment with ${style} at the start of <p> <li> <h>"
  exit 1
end

puts "Starting ..."

Md::Revelator.reveal!(input, output, version)

puts "SUCCESS"

puts "Please open #{output}/index.html in browser"